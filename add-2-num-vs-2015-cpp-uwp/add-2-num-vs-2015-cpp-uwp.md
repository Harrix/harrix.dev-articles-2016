---
date: 2016-05-29
categories: [it, programming]
tags: [C++, Visual Studio, Сложение двух чисел, UWP]
author: Anton Sergienko
author-email: anton.b.sergienko@gmail.com
license: CC BY 4.0
license-url: https://github.com/Harrix/harrix.dev/blob/main/LICENSE.md
url-src: https://github.com/Harrix/harrix.dev-blog-2016/blob/main/add-2-num-vs-2015-cpp-uwp/add-2-num-vs-2015-cpp-uwp.md
permalink: https://harrix.dev/ru/blog/2016/add-2-num-vs-2015-cpp-uwp/
lang: ru
---

# Сложение двух чисел в Visual Studio 2015 на C++/CLI (Windows 10 UWP приложение)

![Featured image](featured-image.svg)

В статье рассказывается как создать приложение сложения двух чисел в Visual Studio 2015 на C++/CLI в виде универсального приложения под Windows 10 или Metro приложения приложения.

## Подготовка

При создании приложения Windows попросит перевести устройство в режим разработчика:

![Сообщение об необходимости включения режима разработчика](img/preparation_01.png)

_Рисунок 1 — Сообщение об необходимости включения режима разработчика_

![Включение режима разработчика в Windows 10](img/preparation_02.png)

_Рисунок 2 — Включение режима разработчика в Windows 10_

![Подтверждение включения режима разработчика](img/preparation_03.png)

_Рисунок 3 — Подтверждение включения режима разработчика_

## Создание проекта

![Создание нового проекта](img/new-project_01.png)

_Рисунок 4 — Создание нового проекта_

![Выбор типа нового проекта](img/new-project_02.png)

_Рисунок 5 — Выбор типа нового проекта_

![Созданный проект](img/new-project_03.png)

_Рисунок 6 — Созданный проект_

## Интерфейс приложения

Откройте файл `MainPage.xaml`:

![Открытие файла MainPage.xaml](img/interface_01.png)

_Рисунок 7 — Открытие файла MainPage.xaml_

Если находитесь не в конструкторе, то перейдите в него. Конструктор открывается не очень быстро. В результате увидите это окно:

![Конструктор формы приложения](img/interface_02.png)

_Рисунок 8 — Конструктор формы приложения_

Пока мы не собираемся писать приложения под все платформы с адаптивным дизайном, поэтому в качестве платформы для конструктора выберете `Desktop`:

![Выбор режима отображения формы приложения](img/interface_03.png)

_Рисунок 9 — Выбор режима отображения формы приложения_

Перетащите два `textBox` на форму, в которые будем записывать наши числа:

![Компоненты textBox](img/interface_04.png)

_Рисунок 10 — Компоненты textBox_

И поменяйте значения в этих полях ввода:

![Изменение начального значения в полях ввода](img/interface_05.png)

_Рисунок 11 — Изменение начального значения в полях ввода_

Перетащите кнопку на форму:

![Компонент кнопки на форме](img/interface_06.png)

_Рисунок 12 — Компонент кнопки на форме_

Перетащите третий `textBox` на форму, в которую мы будем выводить информацию, и растяните его:

![Компонент textBox для вывода информации](img/interface_07.png)

_Рисунок 13 — Компонент textBox для вывода информации_

## Написание кода основной программы

Щелкнете по кнопке двойным кликом:

![Двойной клик по кнопке](img/button_01.png)

_Рисунок 14 — Двойной клик по кнопке_

Мы получили метод, в котором прописываем реакцию на клик нашей мыши:

![Метод обработки клика кнопки](img/button_02.png)

_Рисунок 15 — Метод обработки клика кнопки_

В фигурных скобках пропишем код нашей программы по считыванию двух чисел, их сложении и выводе результата:

```cpp
int x, y, z;
// Считаем значение из первого textBox
String^ S1 = textBox->Text;
// Переведем значение в число
wstring ws1(S1->Data());
wstringstream convertor;
convertor << ws1;
convertor >> x;

// Считаем значение из второго textBox
String^ S2 = textBox1->Text;
// Переведем значение в число
wstring ws2(S2->Data());
wstringstream convertor2;
convertor2 << ws2;
convertor2 >> y;

// Посчитаем сумму
z = x + y;

// Выведем результат
textBox2->Text = z.ToString();
```

![Код метода обработки клика кнопки](img/code_01.png)

_Рисунок 16 — Код метода обработки клика кнопки_

Обратите внимание на то, что приходится вот таким страшным способом переводить строчки в числа, так как стандартные функции `int::Parse(S2);` не работают.

Также сейчас нужно в этом файле прописать строчку:

```cpp
using namespace std;
```

![Подключение пространства имен стандартной библиотеки](img/code_02.png)

_Рисунок 17 — Подключение пространства имен стандартной библиотеки_

А также нужно перейти в файл `pch.h`:

![Переход в заголовочный файл](img/code_03.png)

_Рисунок 18 — Переход в заголовочный файл_

И там пропишите строчки:

```cpp
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>
#include <iostream>
#include <sstream>
```

![Подключенные библиотеки](img/code_04.png)

_Рисунок 19 — Подключенные библиотеки_

## Запуск программы

![Запуск приложения](img/run.png)

_Рисунок 20 — Запуск приложения_

Получаем наше приложение:

![Запущенное приложение](img/result_01.png)

_Рисунок 21 — Запущенное приложение_

Чтобы не видеть служебной черной надписи вверху слева, то выберете режим не `Debug`, а `Release`:

![Переключение сборки проекта в режим Release](img/release.png)

_Рисунок 22 — Переключение сборки проекта в режим Release_

![Запущенное приложение в режиме Release](img/result_02.png)

_Рисунок 23 — Запущенное приложение в режиме Release_

При вводе наших чисел и нажатии на кнопку получим вот это:

![Результат выполнения программы](img/result_03.png)

_Рисунок 24 — Результат выполнения программы_
