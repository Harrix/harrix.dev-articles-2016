---
date: 2016-03-22
categories:
  - it
  - programming
tags:
  - SQLite
  - Qt
author: Anton Sergienko
author-email: anton.b.sergienko@gmail.com
license: CC BY 4.0
license-url: https://github.com/Harrix/harrix.dev/blob/main/LICENSE.md
permalink-source: https://github.com/Harrix/harrix.dev-articles-2016/blob/main/qt-sqlite/qt-sqlite.md
permalink: https://harrix.dev/ru/articles/2016/qt-sqlite/
lang: ru
---

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite –≤ Qt

![Featured image](featured-image.svg)

–í —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ —Ç–æ–º, –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å SQLite –≤ Qt.

<details>
<summary>üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</summary>

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–°–æ–∑–¥–∞–Ω–∏–µ Qt –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Å–æ–∑–¥–∞–Ω–∏–µ-qt-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)

–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –ª–∏—à—å —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://doc.qt.io/qt-5/sql-driver.html), —Ç–∞–∫ –∏ –≤ —Å—Ç–∞—Ç—å—è—Ö –¥—Ä—É–≥–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <http://www.prog.org.ru/topic_26665_0.html>).

</details>

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í [—Å—Ç–∞—Ç—å–µ](https://github.com/Harrix/harrix.dev-articles-2016/blob/main/db-browser-for-sqlite/db-browser-for-sqlite.md) | [ü°•](https://harrix.dev/ru/articles/2016/db-browser-for-sqlite/) —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞—Ä–∞–Ω–µ–µ –∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å –∏—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ (–æ–¥–Ω–æ–π –∏–∑ –º–Ω–æ–≥–∏—Ö).

–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –±—É–¥–µ–º –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–π –∏–¥–µ–æ–ª–æ–≥–∏–∏: –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –µ—ë —Å–æ–∑–¥–∞–Ω–∏–µ –º—ã –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ–º –Ω–µ –≤ Qt.

–ò—Ç–∞–∫, –¥–æ–ø—É—Å—Ç–∏–º —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è [–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](files/database.zip), –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –∏ —Ç—Ä–∏ —Å—Ç–æ–ª–±—Ü–∞:

```sql
CREATE TABLE `People` (
`_id`  INTEGER PRIMARY KEY AUTOINCREMENT,
`Name`  TEXT NOT NULL,
`Age`  INTEGER NOT NULL
)
```

![–¢–∞–±–ª–∏—Ü–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](img/table.png)

_–†–∏—Å—É–Ω–æ–∫ 1 ‚Äî –¢–∞–±–ª–∏—Ü–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `C:\`.

## –°–æ–∑–¥–∞–Ω–∏–µ Qt –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ–¥ —Å–ø–æ–π–ª–µ—Ä–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–ª—É—á–∏–º –≤–æ—Ç —Ç–∞–∫—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É:

![–í–Ω–µ—à–Ω–∏—ë –≤–∏–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](img/app.png)

_–†–∏—Å—É–Ω–æ–∫ 2 ‚Äî –í–Ω–µ—à–Ω–∏—ë –≤–∏–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è_

<details>
<summary>–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</summary>

![–ü—É–Ω–∫—Ç –º–µ–Ω—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞](img/new-project_01.png)

_–†–∏—Å—É–Ω–æ–∫ 3 ‚Äî –ü—É–Ω–∫—Ç –º–µ–Ω—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞_

![–í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞](img/new-project_02.png)

_–†–∏—Å—É–Ω–æ–∫ 4 ‚Äî –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞_

![–í—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –µ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è](img/new-project_03.png)

_–†–∏—Å—É–Ω–æ–∫ 5 ‚Äî –í—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –µ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è_

![–í—ã–±–æ—Ä –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞](img/new-project_04.png)

_–†–∏—Å—É–Ω–æ–∫ 6 ‚Äî –í—ã–±–æ—Ä –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞_

![–í—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞](img/new-project_05.png)

_–†–∏—Å—É–Ω–æ–∫ 7 ‚Äî –í—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞_

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π](img/new-project_06.png)

_–†–∏—Å—É–Ω–æ–∫ 8 ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π_

![–û–∫–Ω–æ Qt Creator —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º](img/new-project_07.png)

_–†–∏—Å—É–Ω–æ–∫ 9 ‚Äî –û–∫–Ω–æ Qt Creator —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º_

![–≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ñ–æ—Ä–º–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](img/new-project_08.png)

_–†–∏—Å—É–Ω–æ–∫ 10 ‚Äî –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ñ–æ—Ä–º–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è_

</details>

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í —Ñ–∞–π–ª–µ `.pro` –ø—Ä–æ–ø–∏—à–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–ª–æ–∫–∞ `sql`.

–ë—ã–ª–æ:

```text
QT += core gui
```

–°—Ç–∞–ª–æ:

```text
QT += core gui sql
```

![–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π PRO —Ñ–∞–π–ª](img/pro.png)

_–†–∏—Å—É–Ω–æ–∫ 11 ‚Äî –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π PRO —Ñ–∞–π–ª_

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∏–Ω–∫–ª—É–¥—ã:

```h
#include "QtSql/QSqlDatabase"
#include "QSqlQuery"
```

–ò –≤ –∫–ª–∏–∫–µ –∫–Ω–æ–ø–∫–∏ (–∏–ª–∏ –≥–¥–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ) –ø—Ä–æ–ø–∏—à–µ–º –∫–æ–¥:

```cpp
// –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
QSqlDatabase db;
db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName("C:\\database.db3");
db.open();

// –û—Å—É—â–µ—Å—Ç–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
QSqlQuery query;
query.exec("SELECT _id, name, age FROM People");

// –í—ã–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
while (query.next()) {
  QString _id = query.value(0).toString();
  QString name = query.value(1).toString();
  QString age = query.value(2).toString();
  ui->textEdit->insertPlainText(_id+" "+name+" "+age+"\n");
  }
```

![–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã](img/result.png)

_–†–∏—Å—É–Ω–æ–∫ 12 ‚Äî –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã_

P.S. –í [—Å—Ç–∞—Ç—å–µ](https://github.com/Harrix/harrix.dev-articles-2014/blob/main/output-data-to-qtableview/output-data-to-qtableview.md) | [ü°•](https://harrix.dev/ru/articles/2014/output-data-to-qtableview/) —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ –∑–∞–∫–∏–¥—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `QTableView`.
