---
categories: [it, programming]
tags: [Visual Studio, C++, Сложение двух чисел]
---

# Сложение двух чисел в Visual Studio 2015 на C++ (CLR приложение)

В статье рассказывается как создать CLR приложение сложения двух чисел в Visual Studio 2015 на C++.

## Создание проекта

![Создание нового проекта](img/new-project_01.png)

![Выбор типа нового проекта](img/new-project_02.png)

![Созданный проект](img/new-project_03.png)

## Подготовка проекта

В отличии от Visual Studio 2010 тут CLR приложения создаются пустыми без формы. Зачем они это сделали — непонятно. Будем добавлять форму самостоятельно.

Щелкаем по проекту правой кнопкой и следуем иллюстрациям:

![Добавление нового элемента](img/new-form_01.png)

![Добавление новой формы](img/new-form_02.png)

Вполне возможно, что у вас возникнет вот такая картинка с ошибками:

![Ошибка при создании формы](img/new-form_03.png)

Ничего страшного. Закройте и откройте форму:

![Закрытие новой формы](img/new-form_04.png)

![Повторное открытие формы](img/new-form_05.png)

Далее перейдем в файл `cpp` нашей формы:

![Открытие файла исходников проекта](img/cpp_01.png)

Допишем там вот такой код после единственной строчки:

```cpp
using namespace System;
using namespace System::Windows::Forms;

[STAThread]
void Main(array<String^>^args)
{
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false);

Проект2::MyForm form;
Application::Run(%form);
}:
```

Обратите внимание, что `Проект2` — это название вашего проекта в коде выше. Поэтому, если ваш проект называется по другому, то вставьте своё название проекта:

![Вставленный код](img/cpp_02.png)

Щелкнем по проекту правой кнопкой и перейдем в его свойства:

![Свойства проекта](img/prepare-form_01.png)

В настройках компоновщика нужно в двух местах поменять настройки:

![Выбор подсистемы проекта](img/prepare-form_02.png)

![Выбор точки входа](img/prepare-form_03.png)

Жмем `OK`, и мы закончили прикручивать форму к нашему приложению.

Можете запустить приложение и проверить работоспособность. Если приложение скомпилируется и запустится, то всё норм. Иначе проверьте все шаги до этого:

![Кнопка запуска приложения](img/run_01.png)

![Запущенное приложение](img/run_02.png)

## Интерфейс приложения

Перейдем на форму. Можно сделать двумя способами:

![Переход на форму](img/form_01.png)

Обратите внимание, что код кнопок и сама форма прописывается в `h` файле, а не `cpp`.

Перетащите два `TextBox` на форму, в которые будем записывать наши числа:

![Панель элементов](img/form_02.png)

![Выбор TextBox](img/form_03.png)

![Компонент TextBox на форме](img/form_04.png)

![Второй компонент TextBox на форме](img/form_05.png)

Перетащите кнопку на форму:

![Выбор кнопки](img/form_06.png)

Перетащите третий `TextBox` на форму, в которую мы будем выводить информацию:

![Выбор TextBox](img/form_07.png)

Однострочные и многострочные текстовые поля задаются одним компонентом. Поэтому мы должны изменить параметры нашего `textBox3`, чтобы в нем можно было выводить много строк. Выделим наш `textBox3` и изменим его параметры:

![Изменение свойства Multiline](img/form_08.png)

Теперь мы можем его растянуть вниз:

![Растягивание элемента TextBox](img/form_09.png)

## Написание кода основной программы

Щелкнете по кнопке двойным кликом:

![Компонент кнопки на форме](img/button_01.png)

Мы получили метод, в котором прописываем реакцию на клик нашей мыши:

![Обработчик клика на кнопку](img/button_02.png)

В фигурных скобках пропишем код нашей программы по считыванию двух чисел, их сложении и выводе результата:

```cpp
int x, y, z;

//Считаем значение из первого lineEdit
String^ S1 = textBox1->Text;
//Переведем значение в число
x = Convert::ToInt32(S1);

//Считаем значение из второго lineEdit
String^ S2 = textBox2->Text;
//Переведем значение в число
y = Convert::ToInt32(S2);

//Посчитаем сумму
z = x + y;

//Выведем результат
textBox3->Text = z.ToString();
```

![Код обработчика клика кнопки](img/button_03.png)

## Запуск программы

Я немного поменял размеры компонентов и изменил текст на кнопке. Поэтому ниже на скринах компоненты чуть по другому будут выглядеть:

![Запуск приложения](img/run_03.png)

Получаем наше приложение:

![Запущенное приложение](img/run_04.png)

При вводе наших чисел получим вот это:

![Результат выполнения программы](img/run_05.png)
